generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id              String    @id @default(uuid())
  nome            String
  email           String
  senha           String
  papel           Papel     @default(USUARIO)
  telefone        String?
  avatarUrl       String?
  dataNascimento  DateTime?
  ativo           Boolean   @default(true)
  endereco        Endereco  @relation(fields: [enderecoId], references: [id])
  enderecoId      String    @unique // Chave estrangeira Ãºnica
  dataCriacao     DateTime  @default(now()) @db.Timestamptz()
  dataAtualizacao DateTime  @updatedAt @db.Timestamptz()

  @@map("usuarios")
}

enum Papel {
  USUARIO
  ADMINISTRADOR
}

model Empresa {
  id                String    @id @default(uuid())
  fantasia          String
  razaoSocial       String
  cnpj              String
  inscricaoEstadual String?
  fundacao          DateTime?
  email             String    @unique
  telefone          String?
  site              String?
  endereco          Endereco  @relation(fields: [enderecoId], references: [id])
  enderecoId        String    @unique
  ativo             Boolean   @default(true)
  dataCriacao       DateTime  @default(now()) @db.Timestamptz()
  dataAtualizacao   DateTime  @updatedAt @db.Timestamptz()

  @@map("empresas")
}

model Endereco {
  id              String   @id @default(uuid())
  rua             String
  cidade          String
  uf              String
  pais            String
  cep             String
  usuario         Usuario?
  empresa         Empresa?
  dataCriacao     DateTime @default(now()) @db.Timestamptz()
  dataAtualizacao DateTime @updatedAt @db.Timestamptz()

  @@map("enderecos")
}
